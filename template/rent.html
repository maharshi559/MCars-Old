<section ng-controller="rentController" ng-init="loadCustomers()">

    <div class="row well" ng-hide="search">
        <div class=" col-md-12 ">
            <h4><b>SEARCH</b></h4><hr>
            <form>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="pickup_date">PICKUP DATE</label>
                        <input id="pickup_date" style="width:100%"  ng-model="pickup_date" ng-readonly = "disableSearchForm"/>
                    </div>
                    <div class="form-group">
                        <label for="capacity">CAPACITY</label>
                        <input type="number" class="form-control" ng-model="capacity"  id="capacity" placeholder="Capacity" ng-readonly = "disableSearchForm">
                    </div>

                </div>
                <div class="col-md-6">

                    <div class="form-horizontal">
                        <div class="form-group">
                            <label for="dropoff_date">DROPOFF DATE</label>
                            <input id="dropoff_date" style="width:100%"  ng-model="dropoff_date" ng-readonly = "disableSearchForm"/>
                        </div>

                    <div class="form-group">
                        <label for="cars">CAR TYPE</label>
                        <input type="text" class="form-control" ng-model="cars" id="cars" placeholder="Cars" ng-readonly = "disableSearchForm">
                    </div>
                    <input type="submit"  class="btn btn-success pull-right" ng-click="displayData()" value="{{btnName}}" ng-show="btnType" >
                </div>
                </div>
            </form>
        </div>

        <div class=" col-md-12 " id="customerInput" ng-show=formDisplay>

            <h4><b>Customer Details</b></h4><hr>
            <div class=" col-md-12">
            <div class="form-group">
                Existing  Customer <input type="checkbox" ng-model="checked" >

                <select  class="form-control pull-right"  style="width:70%;" ng-model="customer"  ng-change="customerAutofill()"ng-show="checked" >
                    <option value="">Select customer</option>
                    <option ng-repeat="customer in customers "  value="{{customer.customer_id}}">{{customer.first_name +" "+ customer.last_name }}</option>
                </select>
            </div>
            </div>

            <form>
                <div ng-hide="checked">
                  <div ng-repeat="x in detailcustomer" >
                    <div class="col-md-6">

                        <div class="form-group">
                            <label for="fname">First Name</label>
                            <input type="text" class="form-control" id="fname"ng-model="x.first_name"  placeholder="First Name"  required>
                        </div>
                        <div class="form-group">
                            <label for="lname">Last Name</label>
                            <input type="text" class="form-control" id="lname" ng-model="x.last_name"  placeholder="Last Name"  required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email address</label>
                            <input type="email" class="form-control" id="email" ng-model="x.email" placeholder="Email" required>
                        </div>
                        <div class="form-group">
                            <label for="dobdate">Date of Birth</label>
                            <input id="dobdate"   ng-model="x.dob"  style="width:100%" required>
                        </div>
                        <div class="form-group">
                            <label for="phonenumber">Phonenumber</label>
                            <input type="text" class="form-control" id="phonenumber" ng-model="x.phone_number" placeholder="phonenumber"  required>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="address">Address</label>
                            <input type="text" class="form-control" id="address" ng-model="x.address" placeholder="Address"  required>
                        </div>
                        <div class="form-group">
                            <label for="city">City</label>
                            <input type="text" class="form-control" id="city" ng-model="x.city" placeholder="City"   required>
                        </div>
                        <div class="form-group">
                            <label for="pincode">Pincode</label>
                            <input type="pincode" class="form-control" id="pincode" ng-model="x.pincode" placeholder="Pincode"  required>
                        </div>
                        <div class="form-group">
                            <label for="license">Driving N0.</label>
                            <input type="text" class="form-control" id="license" ng-model="x.driving_no" placeholder="Driving License"  required>
                        </div>
                        <div class="form-group">
                            <label for="aadhar">Aadhar No.</label>
                            <input type="number" class="form-control" id="aadhar" ng-model="aadhar" placeholder="Aadhar Number" >
                        </div>



                    </div>

                  </div>
                </div>
                <input type="submit" class="btn btn-success " value="Preview"  ng-click="previewBooking()">
                <input type="button" class="btn btn-warning " value="Cancel" ng-click="searchForm()">
                <button type="reset" class="btn btn-danger pull-right"><i class="fa fa-refresh"></i></button>
            </form>


        </div>

    </div>

    <section ng-show="detailed">

        <div class="col-md-12">
            <h3>Booking Details:</h3>
            <table class="table table-bordered table-condensed">
                <tr>
                    <th>Pickup Date</th>
                    <td>{{pickup_date}}</td>
                </tr>
                <tr>
                    <th>Dropoff Date</th>
                    <td>{{dropoff_date }}</td>
                </tr>
                <tr>
                    <th>Car Name</th>
                    <td>{{carName}}</td>
                </tr>
                <tr>
                    <th>Car Type</th>
                    <td>{{carType}}</td>
                </tr>
            </table>
        </div>
        <div class="col-md-12">
            <h3>Customer Details:</h3>
        </div>
        <div class="col-md-6">
            <table class="table table-bordered table-condensed">
                <tr>
                    <th>First Name</th>
                    <td>{{detailcustomer[0].first_name}}</td>
                </tr>
                <tr>
                    <th>Last Name</th>
                    <td>{{detailcustomer[0].last_name}}</td>
                </tr>
                <tr>
                    <th>Email</th>
                    <td>{{detailcustomer[0].email}}</td>
                </tr>
                <tr>
                    <th>Phone Number</th>
                    <td>{{detailcustomer[0].phone_number}}</td>
                </tr>
            </table>
        </div>
        <div class="col-md-6">
            <table class="table table-bordered table-condensed">
                <tr>
                    <th>Address</th>
                    <td>{{detailcustomer[0].address}}<br>{{detailcustomer[0].city}}<br>{{detailcustomer[0].pincode}}</td>
                </tr>
                <tr>
                    <th>D.O.B</th>
                    <td>{{detailcustomer[0].dob}}</td>
                </tr>
                <tr>
                    <th>Driving License</th>
                    <td>{{detailcustomer[0].driving_no}}</td>
                </tr>

            </table><br>
        </div>
        <div col-md-12>
            <input type="submit" class="btn btn-success " value="Confirm" ng-click="confirmBooking()">
            <input type="button" class="btn btn-warning " value="Cancel" ng-click="previousForm()">
        </div>


    </section>




    <!--list of cars starts here-->
    <div class="row">
        <div class="col-md-12" ng-show=carListDisplay>
            <div class="panel panel-default" ng-repeat="x in names | filter : search ">
                <div class="panel-body" >
                    <div class="col-md-4">
                        <img src="images/sample.png" alt="car" width="60%">
                    </div>
                    <div class="col-md-4">
                        <h4><strong>{{x.name}}</strong></h4>
                        <h5>Model: {{x.model}}</h5>
                        <h5>Price/Day: {{x.price_day}}/-</h5>

                    </div>
                    <div class="col-md-4">
                        <h5>Dealer: {{x.first_name +" "+ x.last_name }} </h5>
                        <h5>Capacity: {{x.capacity}}</h5>
                        <h5>Extra/hr: {{x.extra_hr}}</h5>
                        <span class="pull-right">

                            <button type="sumbit" ng-click="customerForm(x.car_id,x.vendor_id,x.name,x.cartype)" class="btn btn-info">BOOK</button>
                            </span>
                </div>
                </div>
            </div>


        </div>
    </div>

</section>

<script>
// create DateTimePicker from input HTML element
$("#pickup_date").kendoDateTimePicker({

value: new Date(),
dateInput: true,
    format: "yyyy-MM-dd hh:mm:tt",

});
$("#dropoff_date").kendoDateTimePicker({
    value: new Date(),
    dateInput: true,
    format: "yyyy-MM-dd hh:mm:tt",

});

$("#dobdates").kendoDatePicker({
     //value: new Date(),
    dateInput: true,
//      format: "dd/MM/yyyy",
    format: "yyyy-MM-dd",
    start: "decade",
    max: new Date(1998, 0, 1) // sets max date to Jan 1st, 1998
});


</script>
